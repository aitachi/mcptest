2025-05-26 21:35:34,789 - AgentMCP - INFO - 🌟 系统启动开始
2025-05-26 21:35:34,789 - AgentMCP - INFO - 🚀 初始化MCP服务器...
2025-05-26 21:35:34,789 - AgentMCP - INFO - 🚀 初始化MCP服务器
2025-05-26 21:35:34,789 - AgentMCP - INFO - 🔧 初始化功能注册器
2025-05-26 21:35:34,795 - AgentMCP - INFO - 📦 注册功能: process_data - 处理和转换数据格式
2025-05-26 21:35:34,795 - AgentMCP - INFO - 📦 注册功能: validate_data - 验证数据格式和完整性
2025-05-26 21:35:34,795 - AgentMCP - INFO - 📦 注册功能: analyze_data - 分析数据并生成统计信息
2025-05-26 21:35:34,795 - AgentMCP - INFO - 📦 注册功能: read_file - 读取文件内容
2025-05-26 21:35:34,795 - AgentMCP - INFO - 📦 注册功能: write_file - 写入文件内容
2025-05-26 21:35:34,795 - AgentMCP - INFO - 📦 注册功能: http_request - 发送HTTP请求
2025-05-26 21:35:34,795 - AgentMCP - INFO - 📦 注册功能: send_email - 发送电子邮件
2025-05-26 21:35:34,796 - AgentMCP - INFO - 📦 注册功能: database_query - 执行数据库查询
2025-05-26 21:35:34,796 - AgentMCP - INFO - 📦 注册功能: database_insert - 插入数据到数据库
2025-05-26 21:35:34,796 - AgentMCP - INFO - 📦 注册功能: database_update - 更新数据库记录
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: process_data
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: validate_data
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: analyze_data
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: read_file
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: write_file
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: http_request
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: send_email
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: database_query
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: database_insert
2025-05-26 21:35:34,796 - AgentMCP - INFO - ✅ 注册功能: database_update
2025-05-26 21:35:34,796 - AgentMCP - INFO - 📦 功能注册完成，共注册 10 个功能
2025-05-26 21:35:34,798 - AgentMCP - INFO - ✅ MCP服务器启动成功
2025-05-26 21:35:34,798 - AgentMCP - INFO - 🤖 初始化Agent...
2025-05-26 21:35:34,798 - AgentMCP - INFO - 🧠 初始化大模型客户端 - 模型: Qwen3-32B-AWQ
2025-05-26 21:35:34,798 - AgentMCP - INFO - ⚡ 初始化任务执行器
2025-05-26 21:35:34,798 - AgentMCP - INFO - 🤖 Agent初始化完成
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📋 [MCP] 返回可用功能列表，共 10 个功能
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: process_data - 处理和转换数据格式
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: validate_data - 验证数据格式和完整性
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: analyze_data - 分析数据并生成统计信息
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: read_file - 读取文件内容
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: write_file - 写入文件内容
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: http_request - 发送HTTP请求
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: send_email - 发送电子邮件
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: database_query - 执行数据库查询
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: database_insert - 插入数据到数据库
2025-05-26 21:35:34,799 - AgentMCP - INFO - 📦 可用功能: database_update - 更新数据库记录
2025-05-26 21:35:34,799 - AgentMCP - INFO - 🔍 开始测试查询 1: 从数据库查询用户信息，验证数据格式，处理后保存到文件，并发送邮件通知
2025-05-26 21:35:34,799 - AgentMCP - INFO - 🎯 Agent接收到用户查询: 从数据库查询用户信息，验证数据格式，处理后保存到文件，并发送邮件通知
2025-05-26 21:35:34,800 - AgentMCP - INFO - 📋 获取MCP服务器可用功能列表...
2025-05-26 21:35:34,800 - AgentMCP - INFO - 📋 [MCP] 返回可用功能列表，共 10 个功能
2025-05-26 21:35:34,800 - AgentMCP - INFO - 📦 获取到 10 个可用功能
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - process_data: 处理和转换数据格式
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - validate_data: 验证数据格式和完整性
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - analyze_data: 分析数据并生成统计信息
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - read_file: 读取文件内容
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - write_file: 写入文件内容
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - http_request: 发送HTTP请求
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - send_email: 发送电子邮件
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - database_query: 执行数据库查询
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - database_insert: 插入数据到数据库
2025-05-26 21:35:34,800 - AgentMCP - INFO -   - database_update: 更新数据库记录
2025-05-26 21:35:34,801 - AgentMCP - INFO - 🧠 调用大模型进行任务分析...
2025-05-26 21:35:34,801 - AgentMCP - INFO - 🔍 [LLM] 开始任务分析 - 查询: 从数据库查询用户信息，验证数据格式，处理后保存到文件，并发送邮件通知
2025-05-26 21:35:34,801 - AgentMCP - INFO - 🧠 [LLM] 发送任务分析请求
2025-05-26 21:35:34,801 - AgentMCP - INFO - 🌐 [LLM] 发送请求到大模型 - URL: http://192.168.101.214:6007/v1/chat/completions
2025-05-26 21:35:34,802 - AgentMCP - INFO - 📝 [LLM] 请求消息数量: 1
2025-05-26 21:35:35,537 - httpx - INFO - HTTP Request: POST http://192.168.101.214:6007/v1/chat/completions "HTTP/1.1 502 Bad Gateway"
2025-05-26 21:35:35,540 - AgentMCP - ERROR - ❌ [LLM] 大模型调用失败: Server error '502 Bad Gateway' for url 'http://192.168.101.214:6007/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-26 21:35:35,540 - AgentMCP - INFO - 🔄 [LLM] 使用模拟响应
2025-05-26 21:35:35,545 - AgentMCP - ERROR - ❌ [LLM] 任务分析结果解析失败: Expecting ',' delimiter: line 19 column 9 (char 600)
2025-05-26 21:35:35,545 - AgentMCP - ERROR - 📄 [LLM] 原始响应: 
{
    "steps": [
        {
            "function_name": "validate_data",
            "parameters": {"data": "用户查询参数", "rules": {"min_length": 1}}
        },
        {
            "function_name": "database_query", 
            "parameters": {"sql": "SELECT * FROM users WHERE status='active' LIMIT 10"}
        },
        {
            "function_name": "process_data",
            "parameters": {"data": "数据库查询结果", "operation": "format"}
        },
        {
            "function_name": "write_file",
            "parameters": {"file_path": "output/user_data.txt", "content": "格式化后的用户数据"}}
        }
    ],
    "reasoning": "首先验证输入参数，然后查询数据库获取用户信息，对数据进行格式化处理，最后保存到文件中"
}

2025-05-26 21:35:35,547 - AgentMCP - ERROR - ❌ 大模型无法生成执行计划
2025-05-26 21:35:35,548 - AgentMCP - ERROR - ❌ 查询 1 处理失败: 大模型无法生成执行计划
2025-05-26 21:35:35,548 - AgentMCP - INFO - ⏳ 等待3秒后执行下一个测试...
2025-05-26 21:35:38,552 - AgentMCP - INFO - 🔍 开始测试查询 2: 读取配置文件内容，验证配置项的完整性，然后更新数据库中的系统设置
2025-05-26 21:35:38,553 - AgentMCP - INFO - 🎯 Agent接收到用户查询: 读取配置文件内容，验证配置项的完整性，然后更新数据库中的系统设置
2025-05-26 21:35:38,553 - AgentMCP - INFO - 📋 获取MCP服务器可用功能列表...
2025-05-26 21:35:38,554 - AgentMCP - INFO - 📋 [MCP] 返回可用功能列表，共 10 个功能
2025-05-26 21:35:38,554 - AgentMCP - INFO - 📦 获取到 10 个可用功能
2025-05-26 21:35:38,555 - AgentMCP - INFO -   - process_data: 处理和转换数据格式
2025-05-26 21:35:38,555 - AgentMCP - INFO -   - validate_data: 验证数据格式和完整性
2025-05-26 21:35:38,555 - AgentMCP - INFO -   - analyze_data: 分析数据并生成统计信息
2025-05-26 21:35:38,555 - AgentMCP - INFO -   - read_file: 读取文件内容
2025-05-26 21:35:38,556 - AgentMCP - INFO -   - write_file: 写入文件内容
2025-05-26 21:35:38,556 - AgentMCP - INFO -   - http_request: 发送HTTP请求
2025-05-26 21:35:38,556 - AgentMCP - INFO -   - send_email: 发送电子邮件
2025-05-26 21:35:38,556 - AgentMCP - INFO -   - database_query: 执行数据库查询
2025-05-26 21:35:38,557 - AgentMCP - INFO -   - database_insert: 插入数据到数据库
2025-05-26 21:35:38,557 - AgentMCP - INFO -   - database_update: 更新数据库记录
2025-05-26 21:35:38,557 - AgentMCP - INFO - 🧠 调用大模型进行任务分析...
2025-05-26 21:35:38,557 - AgentMCP - INFO - 🔍 [LLM] 开始任务分析 - 查询: 读取配置文件内容，验证配置项的完整性，然后更新数据库中的系统设置
2025-05-26 21:35:38,557 - AgentMCP - INFO - 🧠 [LLM] 发送任务分析请求
2025-05-26 21:35:38,558 - AgentMCP - INFO - 🌐 [LLM] 发送请求到大模型 - URL: http://192.168.101.214:6007/v1/chat/completions
2025-05-26 21:35:38,558 - AgentMCP - INFO - 📝 [LLM] 请求消息数量: 1
2025-05-26 21:35:39,508 - httpx - INFO - HTTP Request: POST http://192.168.101.214:6007/v1/chat/completions "HTTP/1.1 502 Bad Gateway"
2025-05-26 21:35:39,509 - AgentMCP - ERROR - ❌ [LLM] 大模型调用失败: Server error '502 Bad Gateway' for url 'http://192.168.101.214:6007/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502
2025-05-26 21:35:39,509 - AgentMCP - INFO - 🔄 [LLM] 使用模拟响应
2025-05-26 21:35:39,510 - AgentMCP - ERROR - ❌ [LLM] 任务分析结果解析失败: Expecting ',' delimiter: line 19 column 9 (char 600)
2025-05-26 21:35:39,510 - AgentMCP - ERROR - 📄 [LLM] 原始响应: 
{
    "steps": [
        {
            "function_name": "validate_data",
            "parameters": {"data": "用户查询参数", "rules": {"min_length": 1}}
        },
        {
            "function_name": "database_query", 
            "parameters": {"sql": "SELECT * FROM users WHERE status='active' LIMIT 10"}
        },
        {
            "function_name": "process_data",
            "parameters": {"data": "数据库查询结果", "operation": "format"}
        },
        {
            "function_name": "write_file",
            "parameters": {"file_path": "output/user_data.txt", "content": "格式化后的用户数据"}}
        }
    ],
    "reasoning": "首先验证输入参数，然后查询数据库获取用户信息，对数据进行格式化处理，最后保存到文件中"
}

2025-05-26 21:35:39,510 - AgentMCP - ERROR - ❌ 大模型无法生成执行计划
2025-05-26 21:35:39,510 - AgentMCP - ERROR - ❌ 查询 2 处理失败: 大模型无法生成执行计划
2025-05-26 21:35:39,511 - AgentMCP - INFO - ⏳ 等待3秒后执行下一个测试...
2025-05-26 21:35:42,523 - AgentMCP - INFO - 🔍 开始测试查询 3: 查询数据库中的订单数据，进行数据分析生成统计报告，保存结果并发送邮件
2025-05-26 21:35:42,523 - AgentMCP - INFO - 🎯 Agent接收到用户查询: 查询数据库中的订单数据，进行数据分析生成统计报告，保存结果并发送邮件
2025-05-26 21:35:42,523 - AgentMCP - INFO - 📋 获取MCP服务器可用功能列表...
2025-05-26 21:35:42,523 - AgentMCP - INFO - 📋 [MCP] 返回可用功能列表，共 10 个功能
2025-05-26 21:35:42,524 - AgentMCP - INFO - 📦 获取到 10 个可用功能
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - process_data: 处理和转换数据格式
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - validate_data: 验证数据格式和完整性
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - analyze_data: 分析数据并生成统计信息
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - read_file: 读取文件内容
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - write_file: 写入文件内容
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - http_request: 发送HTTP请求
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - send_email: 发送电子邮件
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - database_query: 执行数据库查询
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - database_insert: 插入数据到数据库
2025-05-26 21:35:42,524 - AgentMCP - INFO -   - database_update: 更新数据库记录
2025-05-26 21:35:42,524 - AgentMCP - INFO - 🧠 调用大模型进行任务分析...
2025-05-26 21:35:42,525 - AgentMCP - INFO - 🔍 [LLM] 开始任务分析 - 查询: 查询数据库中的订单数据，进行数据分析生成统计报告，保存结果并发送邮件
2025-05-26 21:35:42,525 - AgentMCP - INFO - 🧠 [LLM] 发送任务分析请求
2025-05-26 21:35:42,525 - AgentMCP - INFO - 🌐 [LLM] 发送请求到大模型 - URL: http://192.168.101.214:6007/v1/chat/completions
2025-05-26 21:35:42,525 - AgentMCP - INFO - 📝 [LLM] 请求消息数量: 1
